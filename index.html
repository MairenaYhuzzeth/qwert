<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Test de depresión UMBRAL</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f1f1f1;
            margin: 0;
            padding: 0;
        }

        .pagina {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .caja {
            background-color: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            max-width: 500px;
            width: 100%;
        }

        h1, h2 {
            text-align: center;
            color: #4b0082;
        }

        input[type="text"], input[list] {
            width: 100%;
            padding: 10px;
            margin: 8px 0 15px 0;
            border-radius: 6px;
            border: 1px solid #ccc;
        }

        button {
            width: 100%;
            padding: 12px;
            margin-top: 15px;
            background-color: #4b0082;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
        }

        button:hover {
            background-color: #6a1b9a;
        }

        .pregunta-card {
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            background-color: #fafafa;
        }

        label {
            display: block;
            margin-bottom: 5px;
        }

        #resultado {
            background-color: #e0ffe0;
            border: 1px solid #8bc34a;
            border-radius: 8px;
            padding: 20px;
        }
    </style>
</head>

<body>
<div class="pagina">
<div class="caja">

<h1>Test de depresión UMBRAL</h1>

<form id="formUsuario">
    <label>Nombre</label>
    <input type="text" id="Nombre" required>

    <label>Apellido</label>
    <input type="text" id="Apellido" required>

    <label>Edad</label>
    <input type="text" id="Edad" required>

    <label>Carrera</label>
    <input type="text" id="Carrera" required>

    <label>Año</label>
    <input list="Añocursante" id="Anio" required>
    <datalist id="Añocursante">
        <option value="Primer año">
        <option value="Segundo año">
        <option value="Tercer año">
        <option value="Cuarto año">
        <option value="Quinto año">
        <option value="Sexto año">
    </datalist>

    <button type="button" onclick="mostrarPreguntas()">Siguiente</button>
</form>

<div id="preguntas" style="display:none;">
    <h2>Responde las siguientes preguntas</h2>

    <div id="contenedorPreguntas"></div>

    <button type="button" onclick="calcularResultado()">Finalizar</button>
</div>

<div id="resultado" style="display:none;">
    <h2>Resultado del test</h2>
    <p id="mensajeResultado"></p>
</div>

</div>
</div>

<script>

const preguntasTexto = [
    "¿Con qué frecuencia te has sentido vacío o desconectado de tus emociones?",
    "¿Con qué frecuencia has perdido interés en cosas que antes disfrutabas?",
    "¿Con qué frecuencia te sientes cansado incluso sin hacer mucho esfuerzo?",
    "¿Con qué frecuencia tienes pensamientos negativos sobre ti mismo?",
    "¿Con qué frecuencia te resulta difícil levantarte o comenzar el día?",
    "¿Con qué frecuencia has pensado en hacerte daño?",
    "¿Con qué frecuencia el dolor físico parece aliviar lo que sientes emocionalmente?",
    "¿Con qué frecuencia ocultas cómo te sientes para que nadie lo note?",
    "¿Con qué frecuencia sientes que no mereces ayuda o apoyo?",
    "¿Con qué frecuencia sientes que todo es demasiado pesado de llevar?"
];

const contenedor = document.getElementById("contenedorPreguntas");

contenedor.innerHTML = preguntasTexto.map((texto, i) => `
    <div class="pregunta-card">
        <p>${i + 1}. ${texto}</p>
        <label><input type="radio" name="p${i+1}" value="1"> Nunca</label>
        <label><input type="radio" name="p${i+1}" value="2"> Rara vez</label>
        <label><input type="radio" name="p${i+1}" value="3"> A veces</label>
        <label><input type="radio" name="p${i+1}" value="4"> Frecuentemente</label>
        <label><input type="radio" name="p${i+1}" value="5"> Siempre</label>
    </div>
`).join("");

function mostrarPreguntas() {
    if (!Nombre.value || !Apellido.value || !Edad.value || !Carrera.value || !Anio.value) {
        alert("Completa todos los campos");
        return;
    }

    localStorage.setItem("usuario", JSON.stringify({
        nombre: Nombre.value,
        apellido: Apellido.value,
        anio: Anio.value
    }));

    formUsuario.style.display = "none";
    preguntas.style.display = "block";
}

function calcularResultado() {

    const sintomas = [
        "Vacío emocional",
        "Pérdida de interés",
        "Cansancio persistente",
        "Pensamientos negativos",
        "Dificultad para iniciar el día",
        "Pensamientos de autolesión",
        "Alivio emocional mediante dolor físico",
        "Ocultamiento emocional",
        "Sentimiento de no merecer ayuda",
        "Sobrecarga emocional"
    ];

    let resultadosHTML = "";
    let mayorPorcentaje = 0;
    let sintomaPredominante = "";

    for (let i = 1; i <= 10; i++) {
        const r = document.querySelector(`input[name="p${i}"]:checked`);

        if (!r) {
            alert("Responde todas las preguntas");
            return;
        }

        const porcentaje = Math.round((parseInt(r.value) / 5) * 100);

        resultadosHTML += `<p>${sintomas[i - 1]}: ${porcentaje}%</p>`;

        if (porcentaje > mayorPorcentaje) {
            mayorPorcentaje = porcentaje;
            sintomaPredominante = sintomas[i - 1];
        }
    }

    const usuario = JSON.parse(localStorage.getItem("usuario"));

    preguntas.style.display = "none";
    resultado.style.display = "block";

    mensajeResultado.innerHTML = `
        Hola <strong>${usuario.nombre} ${usuario.apellido}</strong><br>
        Año cursante: <strong>${usuario.anio}</strong><br><br>

        <strong>Resultados por síntoma:</strong>
        ${resultadosHTML}
        <hr>
        <strong>Síntoma predominante:</strong><br>
        ${sintomaPredominante} (${mayorPorcentaje}%)
        <br><br>
        <em>Este test es orientativo y no reemplaza una evaluación profesional.</em>
    `;
}

</script>

</body>
</html>
